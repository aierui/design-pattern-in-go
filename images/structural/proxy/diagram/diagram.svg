<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="297px" preserveAspectRatio="none" style="width:703px;height:297px;" version="1.1" viewBox="0 0 703 297" width="703px" zoomAndPan="magnify"><defs><filter height="300%" id="fesw12qc3ztgt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[3c860f157884091a1d956b7d06c4c4d5]
cluster proxy--><polygon fill="#FFFFFF" filter="url(#fesw12qc3ztgt)" points="14,16,60,16,67,38.4883,681,38.4883,681,285,14,285,14,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="67" y1="38.4883" y2="38.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="18" y="31.5352">proxy</text><!--MD5=[f52af54c97617ca6b0f4bdd59554cad1]
class proxy.application--><rect fill="#FEFECE" filter="url(#fesw12qc3ztgt)" height="60.9551" id="proxy.application" style="stroke: #A80036; stroke-width: 1.5;" width="308" x="22" y="190"/><ellipse cx="140.25" cy="206" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M139.4834,207.063 Q137.6323,206.3574 136.9766,205.5813 Q136.3208,204.8052 136.3208,203.4937 Q136.3208,201.8086 137.3999,200.8457 Q138.479,199.8828 140.3633,199.8828 Q141.2183,199.8828 142.0732,200.0779 Q142.9282,200.2729 143.7666,200.6548 L143.7666,203.0454 Q142.978,202.4893 142.1646,202.1987 Q141.3511,201.9082 140.5542,201.9082 Q139.666,201.9082 139.1929,202.2651 Q138.7197,202.6221 138.7197,203.2861 Q138.7197,203.8008 139.0642,204.137 Q139.4087,204.4731 140.5044,204.8799 L141.5586,205.2783 Q143.0527,205.8262 143.7583,206.731 Q144.4639,207.6357 144.4639,209.0137 Q144.4639,210.8896 143.3557,211.8152 Q142.2476,212.7407 140.0063,212.7407 Q139.085,212.7407 138.1594,212.5208 Q137.2339,212.3008 136.3706,211.8691 L136.3706,209.3374 Q137.3501,210.0347 138.2673,210.375 Q139.1846,210.7153 140.0811,210.7153 Q140.9858,210.7153 141.4839,210.3044 Q141.9819,209.8936 141.9819,209.1548 Q141.9819,208.5986 141.6499,208.1794 Q141.3179,207.7603 140.687,207.5195 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="160.75" y="210.5352">application</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23" x2="329" y1="222" y2="222"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="23" x2="329" y1="230" y2="230"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30" y="238"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="42" y="244.6348">handleRequest(url string, method string) (int, string)</text><!--MD5=[143f80f06e7476fe9d27c9d034991fbd]
class proxy.nginx--><rect fill="#FEFECE" filter="url(#fesw12qc3ztgt)" height="112.7754" id="proxy.nginx" style="stroke: #A80036; stroke-width: 1.5;" width="308" x="365" y="164"/><ellipse cx="499.25" cy="180" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M498.4834,181.063 Q496.6323,180.3574 495.9766,179.5813 Q495.3208,178.8052 495.3208,177.4937 Q495.3208,175.8086 496.3999,174.8457 Q497.479,173.8828 499.3633,173.8828 Q500.2183,173.8828 501.0732,174.0779 Q501.9282,174.2729 502.7666,174.6548 L502.7666,177.0454 Q501.978,176.4893 501.1646,176.1987 Q500.3511,175.9082 499.5542,175.9082 Q498.666,175.9082 498.1929,176.2651 Q497.7197,176.6221 497.7197,177.2861 Q497.7197,177.8008 498.0642,178.137 Q498.4087,178.4731 499.5044,178.8799 L500.5586,179.2783 Q502.0527,179.8262 502.7583,180.731 Q503.4639,181.6357 503.4639,183.0137 Q503.4639,184.8896 502.3557,185.8152 Q501.2476,186.7407 499.0063,186.7407 Q498.085,186.7407 497.1594,186.5208 Q496.2339,186.3008 495.3706,185.8691 L495.3706,183.3374 Q496.3501,184.0347 497.2673,184.375 Q498.1846,184.7153 499.0811,184.7153 Q499.9858,184.7153 500.4839,184.3044 Q500.9819,183.8936 500.9819,183.1548 Q500.9819,182.5986 500.6499,182.1794 Q500.3179,181.7603 499.687,181.5195 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="31" x="519.75" y="184.5352">nginx</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="366" x2="672" y1="196" y2="196"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="373" y="204"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="385" y="210.6348">application *application</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="373" y="216.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="385" y="223.5898">maxAllowedRequest int</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="373" y="229.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="385" y="236.5449">rateLimiter</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="23" x="446" y="236.5449">map</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="469" y="236.5449">[string]int</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="366" x2="672" y1="242.8652" y2="242.8652"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="373" y="250.8652"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="385" y="257.5">handleRequest(url string, method string) (int, string)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="373" y="263.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="385" y="270.4551">checkRateLimiting(url string) bool</text><!--MD5=[c8607c760928c9a3c0224c3ffd5381a7]
class proxy.server--><rect fill="#FEFECE" filter="url(#fesw12qc3ztgt)" height="60.9551" id="proxy.server" style="stroke: #A80036; stroke-width: 1.5;" width="252" x="221" y="43"/><ellipse cx="324.75" cy="59" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M321.1777,55.2651 L321.1777,53.1069 L328.5571,53.1069 L328.5571,55.2651 L326.0918,55.2651 L326.0918,63.3418 L328.5571,63.3418 L328.5571,65.5 L321.1777,65.5 L321.1777,63.3418 L323.6431,63.3418 L323.6431,55.2651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="36" x="345.25" y="63.5352">server</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="222" x2="472" y1="75" y2="75"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="222" x2="472" y1="83" y2="83"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="229" y="91"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="226" x="241" y="97.6348">handleRequest( string,  string) (int, string)</text><!--MD5=[e94897cdb957a613e0c7cd27d9bec914]
reverse link proxy.server to proxy.application--><path d="M295.8855,117.4405 C268.6827,140.8254 235.9076,169.0005 211.5067,189.9767 " fill="none" id="proxy.server&lt;-proxy.application" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="291.4232,112.0456,311.1528,104.316,300.5497,122.662,291.4232,112.0456" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6ba47216900b4523bc83f565f708a5ac]
reverse link proxy.server to proxy.nginx--><path d="M398.3454,117.3824 C415.4338,131.9871 434.7144,148.4652 452.7665,163.8935 " fill="none" id="proxy.server&lt;-proxy.nginx" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="393.7128,122.6314,383.0568,104.316,402.8086,111.9887,393.7128,122.6314" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c10e925f117bf564b371b0ec1f0e19e0]
@startuml
namespace proxy {
    class application << (S,Aquamarine) >> {
        - handleRequest(url string, method string) (int, string)

    }
    class nginx << (S,Aquamarine) >> {
        - application *application
        - maxAllowedRequest int
        - rateLimiter <font color=blue>map</font>[string]int

        - handleRequest(url string, method string) (int, string)
        - checkRateLimiting(url string) bool

    }
    interface server  {
        - handleRequest( string,  string) (int, string)

    }
}

"proxy.server" <|- - "proxy.application"
"proxy.server" <|- - "proxy.nginx"

@enduml

PlantUML version 1.2020.10(Sun May 17 17:35:57 CST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_222-b10
Operating System: Mac OS X
Default Encoding: US-ASCII
Language: en
Country: CN
--></g></svg>