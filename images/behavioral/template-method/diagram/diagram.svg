<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="349px" preserveAspectRatio="none" style="width:558px;height:349px;" version="1.1" viewBox="0 0 558 349" width="558px" zoomAndPan="magnify"><defs><filter height="300%" id="fgw07emixdach" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[6b2a93d91b78082e7b955ace65a641d6]
cluster templatemethod--><polygon fill="#FFFFFF" filter="url(#fgw07emixdach)" points="14,16,139,16,146,38.4883,536,38.4883,536,337,14,337,14,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="146" y1="38.4883" y2="38.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="18" y="31.5352">templatemethod</text><!--MD5=[98bb23e64becd15671441dc54b550945]
class templatemethod.email--><rect fill="#FEFECE" filter="url(#fgw07emixdach)" height="112.7754" id="templatemethod.email" style="stroke: #A80036; stroke-width: 1.5;" width="235" x="22.5" y="216"/><ellipse cx="120.25" cy="232" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M119.4834,233.063 Q117.6323,232.3574 116.9766,231.5813 Q116.3208,230.8052 116.3208,229.4937 Q116.3208,227.8086 117.3999,226.8457 Q118.479,225.8828 120.3633,225.8828 Q121.2183,225.8828 122.0732,226.0779 Q122.9282,226.2729 123.7666,226.6548 L123.7666,229.0454 Q122.978,228.4893 122.1646,228.1987 Q121.3511,227.9082 120.5542,227.9082 Q119.666,227.9082 119.1929,228.2651 Q118.7197,228.6221 118.7197,229.2861 Q118.7197,229.8008 119.0642,230.137 Q119.4087,230.4731 120.5044,230.8799 L121.5586,231.2783 Q123.0527,231.8262 123.7583,232.731 Q124.4639,233.6357 124.4639,235.0137 Q124.4639,236.8896 123.3557,237.8152 Q122.2476,238.7407 120.0063,238.7407 Q119.085,238.7407 118.1594,238.5208 Q117.2339,238.3008 116.3706,237.8691 L116.3706,235.3374 Q117.3501,236.0347 118.2673,236.375 Q119.1846,236.7153 120.0811,236.7153 Q120.9858,236.7153 121.4839,236.3044 Q121.9819,235.8936 121.9819,235.1548 Q121.9819,234.5986 121.6499,234.1794 Q121.3179,233.7603 120.687,233.5195 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="31" x="140.75" y="236.5352">email</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="256.5" y1="248" y2="248"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="23.5" x2="256.5" y1="256" y2="256"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="264"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="42.5" y="270.6348">genRandomOTP(len int) string</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="276.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="42.5" y="283.5898">saveOTPCache(otp string)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="289.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="42.5" y="296.5449">getMessage(otp string) string</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="302.8652"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="209" x="42.5" y="309.5">sendNotification(message string) error</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30.5" y="315.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="42.5" y="322.4551">publishMetric()</text><!--MD5=[463ea70bf71b416faf4fc691c2af1e3c]
class templatemethod.iOtp--><rect fill="#FEFECE" filter="url(#fgw07emixdach)" height="112.7754" id="templatemethod.iOtp" style="stroke: #A80036; stroke-width: 1.5;" width="188" x="309" y="43"/><ellipse cx="386.75" cy="59" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M383.1777,55.2651 L383.1777,53.1069 L390.5571,53.1069 L390.5571,55.2651 L388.0918,55.2651 L388.0918,63.3418 L390.5571,63.3418 L390.5571,65.5 L383.1777,65.5 L383.1777,63.3418 L385.6431,63.3418 L385.6431,55.2651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="24" x="407.25" y="63.5352">iOtp</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="310" x2="496" y1="75" y2="75"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="310" x2="496" y1="83" y2="83"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="317" y="91"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="329" y="97.6348">genRandomOTP( int) string</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="317" y="103.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="329" y="110.5898">saveOTPCache( string)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="317" y="116.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="329" y="123.5449">getMessage( string) string</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="317" y="129.8652"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="329" y="136.5">sendNotification( string) error</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="317" y="142.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="329" y="149.4551">publishMetric()</text><!--MD5=[7400b156afb3289a2cdc184a8b4186ef]
class templatemethod.otp--><rect fill="#FEFECE" filter="url(#fgw07emixdach)" height="73.9102" id="templatemethod.otp" style="stroke: #A80036; stroke-width: 1.5;" width="227" x="33.5" y="62.5"/><ellipse cx="133.25" cy="78.5" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M132.4834,79.563 Q130.6323,78.8574 129.9766,78.0813 Q129.3208,77.3052 129.3208,75.9937 Q129.3208,74.3086 130.3999,73.3457 Q131.479,72.3828 133.3633,72.3828 Q134.2183,72.3828 135.0732,72.5779 Q135.9282,72.7729 136.7666,73.1548 L136.7666,75.5454 Q135.978,74.9893 135.1646,74.6987 Q134.3511,74.4082 133.5542,74.4082 Q132.666,74.4082 132.1929,74.7651 Q131.7197,75.1221 131.7197,75.7861 Q131.7197,76.3008 132.0642,76.637 Q132.4087,76.9731 133.5044,77.3799 L134.5586,77.7783 Q136.0527,78.3262 136.7583,79.231 Q137.4639,80.1357 137.4639,81.5137 Q137.4639,83.3896 136.3557,84.3152 Q135.2476,85.2407 133.0063,85.2407 Q132.085,85.2407 131.1594,85.0208 Q130.2339,84.8008 129.3706,84.3691 L129.3706,81.8374 Q130.3501,82.5347 131.2673,82.875 Q132.1846,83.2153 133.0811,83.2153 Q133.9858,83.2153 134.4839,82.8044 Q134.9819,82.3936 134.9819,81.6548 Q134.9819,81.0986 134.6499,80.6794 Q134.3179,80.2603 133.687,80.0195 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="19" x="153.75" y="83.0352">otp</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="34.5" x2="259.5" y1="94.5" y2="94.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="41.5" y="102.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="53.5" y="109.1348">iOtp iOtp</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="34.5" x2="259.5" y1="115.4551" y2="115.4551"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="41.5" y="123.4551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="53.5" y="130.0898">genAndSendOTP(otpLength int) error</text><!--MD5=[675ae5bb4ad203118bac2a6e79dedad2]
class templatemethod.sms--><rect fill="#FEFECE" filter="url(#fgw07emixdach)" height="112.7754" id="templatemethod.sms" style="stroke: #A80036; stroke-width: 1.5;" width="235" x="292.5" y="216"/><ellipse cx="394.25" cy="232" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M393.4834,233.063 Q391.6323,232.3574 390.9766,231.5813 Q390.3208,230.8052 390.3208,229.4937 Q390.3208,227.8086 391.3999,226.8457 Q392.479,225.8828 394.3633,225.8828 Q395.2183,225.8828 396.0732,226.0779 Q396.9282,226.2729 397.7666,226.6548 L397.7666,229.0454 Q396.978,228.4893 396.1646,228.1987 Q395.3511,227.9082 394.5542,227.9082 Q393.666,227.9082 393.1929,228.2651 Q392.7197,228.6221 392.7197,229.2861 Q392.7197,229.8008 393.0642,230.137 Q393.4087,230.4731 394.5044,230.8799 L395.5586,231.2783 Q397.0527,231.8262 397.7583,232.731 Q398.4639,233.6357 398.4639,235.0137 Q398.4639,236.8896 397.3557,237.8152 Q396.2476,238.7407 394.0063,238.7407 Q393.085,238.7407 392.1594,238.5208 Q391.2339,238.3008 390.3706,237.8691 L390.3706,235.3374 Q391.3501,236.0347 392.2673,236.375 Q393.1846,236.7153 394.0811,236.7153 Q394.9858,236.7153 395.4839,236.3044 Q395.9819,235.8936 395.9819,235.1548 Q395.9819,234.5986 395.6499,234.1794 Q395.3179,233.7603 394.687,233.5195 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="23" x="414.75" y="236.5352">sms</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="293.5" x2="526.5" y1="248" y2="248"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="293.5" x2="526.5" y1="256" y2="256"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="300.5" y="264"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="312.5" y="270.6348">genRandomOTP(len int) string</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="300.5" y="276.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="312.5" y="283.5898">saveOTPCache(otp string)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="300.5" y="289.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="312.5" y="296.5449">getMessage(otp string) string</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="300.5" y="302.8652"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="209" x="312.5" y="309.5">sendNotification(message string) error</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="300.5" y="315.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="312.5" y="322.4551">publishMetric()</text><!--MD5=[4b9b0b74c5f24dc9926064abd0017197]
reverse link templatemethod.otp to templatemethod.email--><path d="M144.971,149.6457 C144.1345,170.318 143.1611,194.3766 142.2984,215.6961 " fill="none" id="templatemethod.otp&lt;-templatemethod.email" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="145.4983,136.6128,141.2589,142.4461,145.013,148.603,149.2524,142.7697,145.4983,136.6128" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8607abe910ce3b9ccf39ab2bf988bb25]
reverse link templatemethod.otp to templatemethod.sms--><path d="M214.4264,143.8527 C247.7549,165.776 288.3507,192.4797 323.9003,215.8641 " fill="none" id="templatemethod.otp&lt;-templatemethod.sms" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="203.4201,136.6128,206.2346,143.252,213.4456,143.2075,210.6311,136.5683,203.4201,136.6128" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2c6d0e5ee8c0556572f25c9359bd3a07]
reverse link templatemethod.iOtp to templatemethod.email--><path d="M299.8722,167.3369 C275.528,183.3504 249.8216,200.2599 226.3095,215.7261 " fill="none" id="templatemethod.iOtp&lt;-templatemethod.email" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="296.3279,161.2897,316.884,156.1467,304.0218,172.9861,296.3279,161.2897" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f2d54df7b79c8400d0daeae6365ad27e]
reverse link templatemethod.iOtp to templatemethod.sms--><path d="M406.1143,176.4678 C406.6485,189.6709 407.1949,203.1738 407.7028,215.7261 " fill="none" id="templatemethod.iOtp&lt;-templatemethod.sms" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="399.1065,176.4134,405.2921,156.1467,413.095,175.8473,399.1065,176.4134" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[43d8d358dff65a3730a69a6eee448c73]
@startuml
namespace templatemethod {
    class email << (S,Aquamarine) >> {
        - genRandomOTP(len int) string
        - saveOTPCache(otp string) 
        - getMessage(otp string) string
        - sendNotification(message string) error
        - publishMetric() 

    }
    interface iOtp  {
        - genRandomOTP( int) string
        - saveOTPCache( string) 
        - getMessage( string) string
        - sendNotification( string) error
        - publishMetric() 

    }
    class otp << (S,Aquamarine) >> {
        - iOtp iOtp

        - genAndSendOTP(otpLength int) error

    }
    class sms << (S,Aquamarine) >> {
        - genRandomOTP(len int) string
        - saveOTPCache(otp string) 
        - getMessage(otp string) string
        - sendNotification(message string) error
        - publishMetric() 

    }
}
"templatemethod.otp" *- - "templatemethod.email"
"templatemethod.otp" *- - "templatemethod.sms"

"templatemethod.iOtp" <|- - "templatemethod.email"
"templatemethod.iOtp" <|- - "templatemethod.sms"

@enduml

PlantUML version 1.2020.10(Sun May 17 17:35:57 CST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_222-b10
Operating System: Mac OS X
Default Encoding: US-ASCII
Language: en
Country: CN
--></g></svg>